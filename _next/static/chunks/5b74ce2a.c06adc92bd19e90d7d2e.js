(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{74302:function(e,t,r){"use strict";r.d(t,{nh:function(){return x}});var n=r(51119),s=r(10717),i=r.n(s),o=r(64649),a=r(82722),u=r.n(a),c=r(17022),d=r.n(c),l=r(37503),h=r(83871),p=r(96346),y=r(86430),g=(r(50714),r(87414),r(90331)),b=r.n(g),f=r(83669);const m=e=>o.lW.isBuffer(e)?e:e instanceof Uint8Array?o.lW.from(e.buffer,e.byteOffset,e.byteLength):o.lW.from(e);class k{constructor(e){Object.assign(this,e)}encode(){return o.lW.from((0,h.serialize)(I,this))}static decode(e){return(0,h.deserialize)(I,this,e)}static decodeUnchecked(e){return(0,h.deserializeUnchecked)(I,this,e)}}const I=new Map;class x extends k{constructor(e){if(super({}),(0,n.Z)(this,"_bn",void 0),function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"===typeof e){const t=d().decode(e);if(32!=t.length)throw new Error("Invalid public key input");this._bn=new(u())(t)}else this._bn=new(u())(e);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(e){return this._bn.eq(e._bn)}toBase58(){return d().encode(this.toBytes())}toBytes(){return this.toBuffer()}toBuffer(){const e=this._bn.toArrayLike(o.lW);if(32===e.length)return e;const t=o.lW.alloc(32);return e.copy(t,32-e.length),t}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=o.lW.concat([e.toBuffer(),o.lW.from(t),r.toBuffer()]),s=await(0,l.JQ)(new Uint8Array(n));return new x(o.lW.from(s,"hex"))}static async createProgramAddress(e,t){let r=o.lW.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=o.lW.concat([r,m(e)])})),r=o.lW.concat([r,t.toBuffer(),o.lW.from("ProgramDerivedAddress")]);let n=await(0,l.JQ)(new Uint8Array(r)),s=new(u())(n,16).toArray(void 0,32);if(S(s))throw new Error("Invalid seeds, address must fall off the curve");return new x(s)}static async findProgramAddress(e,t){let r,n=255;for(;0!=n;){try{const s=e.concat(o.lW.from([n]));r=await this.createProgramAddress(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static isOnCurve(e){return 1==S(e)}}(0,n.Z)(x,"default",new x("11111111111111111111111111111111")),I.set(x,{kind:"struct",fields:[["_bn","u256"]]});let w=i().lowlevel;function S(e){var t=[w.gf(),w.gf(),w.gf(),w.gf()],r=w.gf(),n=w.gf(),s=w.gf(),i=w.gf(),o=w.gf(),a=w.gf(),u=w.gf();return w.set25519(t[2],A),w.unpack25519(t[1],e),w.S(s,t[1]),w.M(i,s,w.D),w.Z(s,s,t[2]),w.A(i,t[2],i),w.S(o,i),w.S(a,o),w.M(u,a,o),w.M(r,u,s),w.M(r,r,i),w.pow2523(r,r),w.M(r,r,s),w.M(r,r,i),w.M(r,r,i),w.M(t[0],r,i),w.S(n,t[0]),w.M(n,n,i),P(n,s)&&w.M(t[0],t[0],R),w.S(n,t[0]),w.M(n,n,i),P(n,s)?0:1}let A=w.gf([1]),R=w.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return w.pack25519(r,e),w.pack25519(n,t),w.crypto_verify_32(r,0,n,0)}new x("BPFLoader1111111111111111111111111111111111");const W=(e="publicKey")=>p.blob(32,e),v=(e="string")=>{const t=p.struct([p.u32("length"),p.u32("lengthPadding"),p.blob(p.offset(p.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString("utf8"),t.encode=(e,t,r)=>{const s={chars:o.lW.from(e,"utf8")};return n(s,t,r)},t.alloc=e=>p.u32().span+p.u32().span+o.lW.from(e,"utf8").length,t};function _(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function E(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}class B{constructor(e){(0,n.Z)(this,"header",void 0),(0,n.Z)(this,"accountKeys",void 0),(0,n.Z)(this,"recentBlockhash",void 0),(0,n.Z)(this,"instructions",void 0),(0,n.Z)(this,"indexToProgramIds",new Map),this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new x(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];E(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=d().decode(e.data);let s=[];E(s,t.length);let i=[];return E(i,n.length),{programIdIndex:r,keyIndicesCount:o.lW.from(s),keyIndices:o.lW.from(t),dataLength:o.lW.from(i),data:n}}));let n=[];E(n,r.length);let s=o.lW.alloc(z);o.lW.from(n).copy(s);let i=n.length;r.forEach((e=>{const t=p.struct([p.u8("programIdIndex"),p.blob(e.keyIndicesCount.length,"keyIndicesCount"),p.seq(p.u8("keyIndex"),e.keyIndices.length,"keyIndices"),p.blob(e.dataLength.length,"dataLength"),p.seq(p.u8("userdatum"),e.data.length,"data")]).encode(e,s,i);i+=t})),s=s.slice(0,i);const a=p.struct([p.blob(1,"numRequiredSignatures"),p.blob(1,"numReadonlySignedAccounts"),p.blob(1,"numReadonlyUnsignedAccounts"),p.blob(t.length,"keyCount"),p.seq(W("key"),e,"keys"),W("recentBlockhash")]),u={numRequiredSignatures:o.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:o.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:o.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:o.lW.from(t),keys:this.accountKeys.map((e=>m(e.toBytes()))),recentBlockhash:d().decode(this.recentBlockhash)};let c=o.lW.alloc(2048);const l=a.encode(u,c);return s.copy(c,l),c.slice(0,l+s.length)}static from(e){let t=[...e];const r=t.shift(),n=t.shift(),s=t.shift(),i=_(t);let a=[];for(let p=0;p<i;p++){const e=t.slice(0,32);t=t.slice(32),a.push(d().encode(o.lW.from(e)))}const u=t.slice(0,32);t=t.slice(32);const c=_(t);let l=[];for(let p=0;p<c;p++){const e=t.shift(),r=_(t),n=t.slice(0,r);t=t.slice(r);const s=_(t),i=t.slice(0,s),a=d().encode(o.lW.from(i));t=t.slice(s),l.push({programIdIndex:e,accounts:n,data:a})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:s},recentBlockhash:d().encode(o.lW.from(u)),accountKeys:a,instructions:l};return new B(h)}}function Z(e,t){if(!e)throw new Error(t||"Assertion failed")}const T=o.lW.alloc(64).fill(0),z=1232;class K{constructor(e){(0,n.Z)(this,"keys",void 0),(0,n.Z)(this,"programId",void 0),(0,n.Z)(this,"data",o.lW.alloc(0)),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}}class O{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){(0,n.Z)(this,"signatures",[]),(0,n.Z)(this,"feePayer",void 0),(0,n.Z)(this,"instructions",[]),(0,n.Z)(this,"recentBlockhash",void 0),(0,n.Z)(this,"nonceInfo",void 0),e&&Object.assign(this,e)}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new K(e))})),this}compileMessage(){const{nonceInfo:e}=this;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));const{recentBlockhash:t}=this;if(!t)throw new Error("Transaction recentBlockhash required");let r;if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let d=0;d<this.instructions.length;d++)if(void 0===this.instructions[d].programId)throw new Error(`Transaction instruction index ${d} has undefined program id`);const n=[],s=[];this.instructions.forEach((e=>{e.keys.forEach((e=>{s.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{s.push({pubkey:new x(e),isSigner:!1,isWritable:!1})})),s.sort((function(e,t){const r=e.isSigner===t.isSigner?0:e.isSigner?-1:1,n=e.isWritable===t.isWritable?0:e.isWritable?-1:1;return r||n}));const i=[];s.forEach((e=>{const t=e.pubkey.toString(),r=i.findIndex((e=>e.pubkey.toString()===t));r>-1?i[r].isWritable=i[r].isWritable||e.isWritable:i.push(e)}));const o=i.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=i.splice(o,1);e.isSigner=!0,e.isWritable=!0,i.unshift(e)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const d of this.signatures){const e=i.findIndex((e=>e.pubkey.equals(d.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${d.publicKey.toString()}`);i[e].isSigner||(i[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,c=0;const l=[],h=[];i.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(l.push(e.toString()),a+=1,r||(u+=1)):(h.push(e.toString()),r||(c+=1))}));const p=l.concat(h),y=this.instructions.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:p.indexOf(r.toString()),accounts:e.keys.map((e=>p.indexOf(e.pubkey.toString()))),data:d().encode(t)}}));return y.forEach((e=>{Z(e.programIdIndex>=0),e.accounts.forEach((e=>Z(e>=0)))})),new B({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:p,recentBlockhash:t,instructions:y})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every(((e,r)=>t[r].equals(e.publicKey))))return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const e=s.publicKey.toString();t.has(e)||(t.add(e),r.push(s))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r),this._verifySignatures(n.serialize(),!0)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const e=s.publicKey.toString();t.has(e)||(t.add(e),r.push(s))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=i().sign.detached(r,e.secretKey);this._addSignature(e.publicKey,m(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Z(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=o.lW.from(t)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(e,t){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(t)return!1}else if(!i().sign.detached.verify(e,r,n.toBuffer()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r&&!this._verifySignatures(n,t))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];E(r,t.length);const n=r.length+64*t.length+e.length,s=o.lW.alloc(n);return Z(t.length<256),o.lW.from(r).copy(s,0),t.forEach((({signature:e},t)=>{null!==e&&(Z(64===e.length,"signature has invalid length"),o.lW.from(e).copy(s,r.length+64*t))})),e.copy(s,r.length+64*t.length),Z(s.length<=z,`Transaction too large: ${s.length} > ${z}`),s}get keys(){return Z(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Z(1===this.instructions.length),this.instructions[0].programId}get data(){return Z(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=_(t);let n=[];for(let s=0;s<r;s++){const e=t.slice(0,64);t=t.slice(64),n.push(d().encode(o.lW.from(e)))}return O.populate(B.from(t),n)}static populate(e,t=[]){const r=new O;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const s={signature:t==d().encode(T)?null:d().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(s)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new K({keys:n,programId:e.accountKeys[t.programIdIndex],data:d().decode(t.data)}))})),r}}const j=new x("SysvarC1ock11111111111111111111111111111111"),G=new x("SysvarRecentB1ockHashes11111111111111111111"),X=new x("SysvarRent111111111111111111111111111111111"),U=(new x("SysvarRewards111111111111111111111111111111"),new x("SysvarStakeHistory1111111111111111111111111"));new x("Sysvar1nstructions1111111111111111111111111");async function M(e,t,r,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},i=await e.sendTransaction(t,r,s),o=(await e.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function q(e){return new Promise((t=>setTimeout(t,e)))}function C(e,t){const r=e.layout.span>=0?e.layout.span:function(e,t){let r=0;return e.layout.fields.forEach((e=>{e.span>=0?r+=e.span:"function"===typeof e.alloc&&(r+=e.alloc(t[e.property]))})),r}(e,t),n=o.lW.alloc(r),s=Object.assign({instruction:e.index},t);return e.layout.encode(s,n),n}const D=p.nu64("lamportsPerSignature"),N=p.struct([p.u32("version"),p.u32("state"),W("authorizedPubkey"),W("nonce"),p.struct([D],"feeCalculator")]),L=N.span;const F=Object.freeze({Create:{index:0,layout:p.struct([p.u32("instruction"),p.ns64("lamports"),p.ns64("space"),W("programId")])},Assign:{index:1,layout:p.struct([p.u32("instruction"),W("programId")])},Transfer:{index:2,layout:p.struct([p.u32("instruction"),p.ns64("lamports")])},CreateWithSeed:{index:3,layout:p.struct([p.u32("instruction"),W("base"),v("seed"),p.ns64("lamports"),p.ns64("space"),W("programId")])},AdvanceNonceAccount:{index:4,layout:p.struct([p.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:p.struct([p.u32("instruction"),p.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:p.struct([p.u32("instruction"),W("authorized")])},AuthorizeNonceAccount:{index:7,layout:p.struct([p.u32("instruction"),W("authorized")])},Allocate:{index:8,layout:p.struct([p.u32("instruction"),p.ns64("space")])},AllocateWithSeed:{index:9,layout:p.struct([p.u32("instruction"),W("base"),v("seed"),p.ns64("space"),W("programId")])},AssignWithSeed:{index:10,layout:p.struct([p.u32("instruction"),W("base"),v("seed"),W("programId")])},TransferWithSeed:{index:11,layout:p.struct([p.u32("instruction"),p.ns64("lamports"),v("seed"),W("programId")])}});class ${constructor(){}static createAccount(e){const t=C(F.Create,{lamports:e.lamports,space:e.space,programId:m(e.programId.toBuffer())});return new K({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;if("basePubkey"in e){t=C(F.TransferWithSeed,{lamports:e.lamports,seed:e.seed,programId:m(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=C(F.Transfer,{lamports:e.lamports}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new K({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){t=C(F.AssignWithSeed,{base:m(e.basePubkey.toBuffer()),seed:e.seed,programId:m(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=C(F.Assign,{programId:m(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new K({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=C(F.CreateWithSeed,{base:m(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:m(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new K({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new O;"basePubkey"in e&&"seed"in e?t.add($.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:L,programId:this.programId})):t.add($.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:L,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=C(F.InitializeNonceAccount,{authorized:m(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new K(r)}static nonceAdvance(e){const t=C(F.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new K(r)}static nonceWithdraw(e){const t=C(F.WithdrawNonceAccount,{lamports:e.lamports});return new K({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!1},{pubkey:X,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=C(F.AuthorizeNonceAccount,{authorized:m(e.newAuthorizedPubkey.toBuffer())});return new K({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;if("basePubkey"in e){t=C(F.AllocateWithSeed,{base:m(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:m(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=C(F.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new K({keys:r,programId:this.programId,data:t})}}(0,n.Z)($,"programId",new x("11111111111111111111111111111111"));const H=z-300;class V{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/V.chunkSize)+1+1)}static async load(e,t,r,n,s){{const i=await e.getMinimumBalanceForRentExemption(s.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new O,a.add($.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(n)||(a=a||new O,a.add($.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<i&&(a=a||new O,a.add($.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:i-o.lamports})))}else a=(new O).add($.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:i>0?i:1,space:s.length,programId:n}));null!==a&&await M(e,a,[t,r],{commitment:"confirmed"})}const i=p.struct([p.u32("instruction"),p.u32("offset"),p.u32("bytesLength"),p.u32("bytesLengthPadding"),p.seq(p.u8("byte"),p.offset(p.u32(),-8),"bytes")]),a=V.chunkSize;let u=0,c=s,d=[];for(;c.length>0;){const s=c.slice(0,a),l=o.lW.alloc(a+16);i.encode({instruction:0,offset:u,bytes:s},l);const h=(new O).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:l});if(d.push(M(e,h,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await q(1e3/e)}u+=a,c=c.slice(a)}await Promise.all(d);{const s=p.struct([p.u32("instruction")]),i=o.lW.alloc(s.span);s.encode({instruction:1},i);const a=(new O).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:X,isSigner:!1,isWritable:!1}],programId:n,data:i});await M(e,a,[t,r],{commitment:"confirmed"})}return!0}}(0,n.Z)(V,"chunkSize",H);new x("BPFLoader2111111111111111111111111111111111");var Q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:{};var J={exports:{}};!function(e,t){var r="undefined"!==typeof self?self:Q,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,s="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function y(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=y(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=y(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=d(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(e,t){var r=(t=t||{}).body;if(e instanceof k){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function I(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}})),t}function x(e){var t=new h;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();t.append(n,s)}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},f.call(k.prototype),f.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];w.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(R){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,r){return new Promise((function(n,i){var o=new k(e,r);if(o.signal&&o.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:x(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new w(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&s&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=h,e.Request=k,e.Response=w),t.Headers=h,t.Request=k,t.Response=w,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(J,J.exports);Error;const Y=(0,y.oQ)((0,y.eE)(x),(0,y.Z_)(),(e=>new x(e))),ee=(0,y.bc)([(0,y.Z_)(),(0,y.i0)("base64")]),te=(0,y.oQ)((0,y.eE)(o.lW),ee,(e=>o.lW.from(e[0],"base64")));function re(e){return(0,y.G0)([(0,y.dt)({jsonrpc:(0,y.i0)("2.0"),id:(0,y.Z_)(),result:e}),(0,y.dt)({jsonrpc:(0,y.i0)("2.0"),id:(0,y.Z_)(),error:(0,y.dt)({code:(0,y._4)(),message:(0,y.Z_)(),data:(0,y.jt)((0,y.Yj)())})})])}const ne=re((0,y._4)());function se(e){return(0,y.oQ)(re(e),ne,(t=>"error"in t?t:{...t,result:(0,y.Ue)(t.result,e)}))}function ie(e){return se((0,y.dt)({context:(0,y.dt)({slot:(0,y.Rx)()}),value:e}))}function oe(e){return(0,y.dt)({context:(0,y.dt)({slot:(0,y.Rx)()}),value:e})}const ae=(0,y.dt)({foundation:(0,y.Rx)(),foundationTerm:(0,y.Rx)(),initial:(0,y.Rx)(),taper:(0,y.Rx)(),terminal:(0,y.Rx)()}),ue=(se((0,y.IX)((0,y.AG)((0,y.dt)({epoch:(0,y.Rx)(),effectiveSlot:(0,y.Rx)(),amount:(0,y.Rx)(),postBalance:(0,y.Rx)()})))),(0,y.dt)({epoch:(0,y.Rx)(),slotIndex:(0,y.Rx)(),slotsInEpoch:(0,y.Rx)(),absoluteSlot:(0,y.Rx)(),blockHeight:(0,y.jt)((0,y.Rx)()),transactionCount:(0,y.jt)((0,y.Rx)())})),ce=(0,y.dt)({slotsPerEpoch:(0,y.Rx)(),leaderScheduleSlotOffset:(0,y.Rx)(),warmup:(0,y.O7)(),firstNormalEpoch:(0,y.Rx)(),firstNormalSlot:(0,y.Rx)()}),de=(0,y.IM)((0,y.Z_)(),(0,y.IX)((0,y.Rx)())),le=(0,y.AG)((0,y.G0)([(0,y.dt)({}),(0,y.Z_)()])),he=(0,y.dt)({err:le}),pe=(0,y.i0)("receivedSignature");(0,y.dt)({"solana-core":(0,y.Z_)(),"feature-set":(0,y.jt)((0,y.Rx)())}),ie((0,y.dt)({err:(0,y.AG)((0,y.G0)([(0,y.dt)({}),(0,y.Z_)()])),logs:(0,y.AG)((0,y.IX)((0,y.Z_)())),accounts:(0,y.jt)((0,y.AG)((0,y.IX)((0,y.dt)({executable:(0,y.O7)(),owner:(0,y.Z_)(),lamports:(0,y.Rx)(),data:(0,y.IX)((0,y.Z_)()),rentEpoch:(0,y.jt)((0,y.Rx)())})))),unitsConsumed:(0,y.jt)((0,y.Rx)())}));se(ae),se(ue),se(ce),se(de),se((0,y.Rx)()),ie((0,y.dt)({total:(0,y.Rx)(),circulating:(0,y.Rx)(),nonCirculating:(0,y.Rx)(),nonCirculatingAccounts:(0,y.IX)(Y)}));const ye=(0,y.dt)({amount:(0,y.Z_)(),uiAmount:(0,y.AG)((0,y.Rx)()),decimals:(0,y.Rx)(),uiAmountString:(0,y.jt)((0,y.Z_)())}),ge=(ie((0,y.IX)((0,y.dt)({address:Y,amount:(0,y.Z_)(),uiAmount:(0,y.AG)((0,y.Rx)()),decimals:(0,y.Rx)(),uiAmountString:(0,y.jt)((0,y.Z_)())}))),ie((0,y.IX)((0,y.dt)({pubkey:Y,account:(0,y.dt)({executable:(0,y.O7)(),owner:Y,lamports:(0,y.Rx)(),data:te,rentEpoch:(0,y.Rx)()})}))),(0,y.dt)({program:(0,y.Z_)(),parsed:(0,y._4)(),space:(0,y.Rx)()})),be=(ie((0,y.IX)((0,y.dt)({pubkey:Y,account:(0,y.dt)({executable:(0,y.O7)(),owner:Y,lamports:(0,y.Rx)(),data:ge,rentEpoch:(0,y.Rx)()})}))),ie((0,y.IX)((0,y.dt)({lamports:(0,y.Rx)(),address:Y}))),(0,y.dt)({executable:(0,y.O7)(),owner:Y,lamports:(0,y.Rx)(),data:te,rentEpoch:(0,y.Rx)()})),fe=((0,y.dt)({pubkey:Y,account:be}),(0,y.oQ)((0,y.G0)([(0,y.eE)(o.lW),ge]),(0,y.G0)([ee,ge]),(e=>Array.isArray(e)?(0,y.Ue)(e,te):e))),me=(0,y.dt)({executable:(0,y.O7)(),owner:Y,lamports:(0,y.Rx)(),data:fe,rentEpoch:(0,y.Rx)()}),ke=((0,y.dt)({pubkey:Y,account:me}),(0,y.dt)({state:(0,y.G0)([(0,y.i0)("active"),(0,y.i0)("inactive"),(0,y.i0)("activating"),(0,y.i0)("deactivating")]),active:(0,y.Rx)(),inactive:(0,y.Rx)()}),se((0,y.IX)((0,y.dt)({signature:(0,y.Z_)(),slot:(0,y.Rx)(),err:le,memo:(0,y.AG)((0,y.Z_)()),blockTime:(0,y.jt)((0,y.AG)((0,y.Rx)()))}))),se((0,y.IX)((0,y.dt)({signature:(0,y.Z_)(),slot:(0,y.Rx)(),err:le,memo:(0,y.AG)((0,y.Z_)()),blockTime:(0,y.jt)((0,y.AG)((0,y.Rx)()))}))),(0,y.dt)({subscription:(0,y.Rx)(),result:oe(be)}),(0,y.dt)({pubkey:Y,account:be})),Ie=((0,y.dt)({subscription:(0,y.Rx)(),result:oe(ke)}),(0,y.dt)({parent:(0,y.Rx)(),slot:(0,y.Rx)(),root:(0,y.Rx)()})),xe=((0,y.dt)({subscription:(0,y.Rx)(),result:Ie}),(0,y.G0)([(0,y.dt)({type:(0,y.G0)([(0,y.i0)("firstShredReceived"),(0,y.i0)("completed"),(0,y.i0)("optimisticConfirmation"),(0,y.i0)("root")]),slot:(0,y.Rx)(),timestamp:(0,y.Rx)()}),(0,y.dt)({type:(0,y.i0)("createdBank"),parent:(0,y.Rx)(),slot:(0,y.Rx)(),timestamp:(0,y.Rx)()}),(0,y.dt)({type:(0,y.i0)("frozen"),slot:(0,y.Rx)(),timestamp:(0,y.Rx)(),stats:(0,y.dt)({numTransactionEntries:(0,y.Rx)(),numSuccessfulTransactions:(0,y.Rx)(),numFailedTransactions:(0,y.Rx)(),maxTransactionsPerEntry:(0,y.Rx)()})}),(0,y.dt)({type:(0,y.i0)("dead"),slot:(0,y.Rx)(),timestamp:(0,y.Rx)(),err:(0,y.Z_)()})])),we=((0,y.dt)({subscription:(0,y.Rx)(),result:xe}),(0,y.dt)({subscription:(0,y.Rx)(),result:oe((0,y.G0)([he,pe]))}),(0,y.dt)({subscription:(0,y.Rx)(),result:(0,y.Rx)()}),(0,y.dt)({pubkey:(0,y.Z_)(),gossip:(0,y.AG)((0,y.Z_)()),tpu:(0,y.AG)((0,y.Z_)()),rpc:(0,y.AG)((0,y.Z_)()),version:(0,y.AG)((0,y.Z_)())}),(0,y.dt)({votePubkey:(0,y.Z_)(),nodePubkey:(0,y.Z_)(),activatedStake:(0,y.Rx)(),epochVoteAccount:(0,y.O7)(),epochCredits:(0,y.IX)((0,y.bc)([(0,y.Rx)(),(0,y.Rx)(),(0,y.Rx)()])),commission:(0,y.Rx)(),lastVote:(0,y.Rx)(),rootSlot:(0,y.AG)((0,y.Rx)())})),Se=(se((0,y.dt)({current:(0,y.IX)(we),delinquent:(0,y.IX)(we)})),(0,y.G0)([(0,y.i0)("processed"),(0,y.i0)("confirmed"),(0,y.i0)("finalized")])),Ae=(0,y.dt)({slot:(0,y.Rx)(),confirmations:(0,y.AG)((0,y.Rx)()),err:le,confirmationStatus:(0,y.jt)(Se)}),Re=(ie((0,y.IX)((0,y.AG)(Ae))),se((0,y.Rx)()),(0,y.dt)({signatures:(0,y.IX)((0,y.Z_)()),message:(0,y.dt)({accountKeys:(0,y.IX)((0,y.Z_)()),header:(0,y.dt)({numRequiredSignatures:(0,y.Rx)(),numReadonlySignedAccounts:(0,y.Rx)(),numReadonlyUnsignedAccounts:(0,y.Rx)()}),instructions:(0,y.IX)((0,y.dt)({accounts:(0,y.IX)((0,y.Rx)()),data:(0,y.Z_)(),programIdIndex:(0,y.Rx)()})),recentBlockhash:(0,y.Z_)()})})),Pe=(0,y.dt)({parsed:(0,y._4)(),program:(0,y.Z_)(),programId:Y}),We=(0,y.dt)({accounts:(0,y.IX)(Y),data:(0,y.Z_)(),programId:Y}),ve=(0,y.G0)([We,Pe]),_e=(0,y.G0)([(0,y.dt)({parsed:(0,y._4)(),program:(0,y.Z_)(),programId:(0,y.Z_)()}),(0,y.dt)({accounts:(0,y.IX)((0,y.Z_)()),data:(0,y.Z_)(),programId:(0,y.Z_)()})]),Ee=(0,y.oQ)(ve,_e,(e=>"accounts"in e?(0,y.Ue)(e,We):(0,y.Ue)(e,Pe))),Be=(0,y.dt)({signatures:(0,y.IX)((0,y.Z_)()),message:(0,y.dt)({accountKeys:(0,y.IX)((0,y.dt)({pubkey:Y,signer:(0,y.O7)(),writable:(0,y.O7)()})),instructions:(0,y.IX)(Ee),recentBlockhash:(0,y.Z_)()})}),Ze=(0,y.dt)({accountIndex:(0,y.Rx)(),mint:(0,y.Z_)(),uiTokenAmount:ye}),Te=(0,y.dt)({err:le,fee:(0,y.Rx)(),innerInstructions:(0,y.jt)((0,y.AG)((0,y.IX)((0,y.dt)({index:(0,y.Rx)(),instructions:(0,y.IX)((0,y.dt)({accounts:(0,y.IX)((0,y.Rx)()),data:(0,y.Z_)(),programIdIndex:(0,y.Rx)()}))})))),preBalances:(0,y.IX)((0,y.Rx)()),postBalances:(0,y.IX)((0,y.Rx)()),logMessages:(0,y.jt)((0,y.AG)((0,y.IX)((0,y.Z_)()))),preTokenBalances:(0,y.jt)((0,y.AG)((0,y.IX)(Ze))),postTokenBalances:(0,y.jt)((0,y.AG)((0,y.IX)(Ze)))}),ze=(0,y.dt)({err:le,fee:(0,y.Rx)(),innerInstructions:(0,y.jt)((0,y.AG)((0,y.IX)((0,y.dt)({index:(0,y.Rx)(),instructions:(0,y.IX)(Ee)})))),preBalances:(0,y.IX)((0,y.Rx)()),postBalances:(0,y.IX)((0,y.Rx)()),logMessages:(0,y.jt)((0,y.AG)((0,y.IX)((0,y.Z_)()))),preTokenBalances:(0,y.jt)((0,y.AG)((0,y.IX)(Ze))),postTokenBalances:(0,y.jt)((0,y.AG)((0,y.IX)(Ze)))}),Ke=(se((0,y.AG)((0,y.dt)({blockhash:(0,y.Z_)(),previousBlockhash:(0,y.Z_)(),parentSlot:(0,y.Rx)(),transactions:(0,y.IX)((0,y.dt)({transaction:Re,meta:(0,y.AG)(Te)})),rewards:(0,y.jt)((0,y.IX)((0,y.dt)({pubkey:(0,y.Z_)(),lamports:(0,y.Rx)(),postBalance:(0,y.AG)((0,y.Rx)()),rewardType:(0,y.AG)((0,y.Z_)())}))),blockTime:(0,y.AG)((0,y.Rx)())}))),se((0,y.AG)((0,y.dt)({blockhash:(0,y.Z_)(),previousBlockhash:(0,y.Z_)(),parentSlot:(0,y.Rx)(),signatures:(0,y.IX)((0,y.Z_)()),blockTime:(0,y.AG)((0,y.Rx)())}))),se((0,y.AG)((0,y.dt)({slot:(0,y.Rx)(),meta:Te,blockTime:(0,y.jt)((0,y.AG)((0,y.Rx)())),transaction:Re}))),se((0,y.AG)((0,y.dt)({slot:(0,y.Rx)(),transaction:Be,meta:(0,y.AG)(ze),blockTime:(0,y.jt)((0,y.AG)((0,y.Rx)()))}))),ie((0,y.dt)({blockhash:(0,y.Z_)(),feeCalculator:(0,y.dt)({lamportsPerSignature:(0,y.Rx)()})})),(0,y.dt)({slot:(0,y.Rx)(),numTransactions:(0,y.Rx)(),numSlots:(0,y.Rx)(),samplePeriodSecs:(0,y.Rx)()})),Oe=(se((0,y.IX)(Ke)),ie((0,y.AG)((0,y.dt)({feeCalculator:(0,y.dt)({lamportsPerSignature:(0,y.Rx)()})}))),se((0,y.Z_)()),se((0,y.Z_)()),(0,y.dt)({err:le,logs:(0,y.IX)((0,y.Z_)()),signature:(0,y.Z_)()}));(0,y.dt)({result:oe(Oe),subscription:(0,y.Rx)()});class je{constructor(e){(0,n.Z)(this,"_keypair",void 0),this._keypair=e||s.sign.keyPair()}static generate(){return new je(s.sign.keyPair())}static fromSecretKey(e,t){const r=s.sign.keyPair.fromSecretKey(e);if(!t||!t.skipValidation){const e=(new TextEncoder).encode("@solana/web3.js-validation-v1"),t=s.sign.detached(e,r.secretKey);if(!s.sign.detached.verify(e,t,r.publicKey))throw new Error("provided secretKey is invalid")}return new je(r)}static fromSeed(e){return new je(s.sign.keyPair.fromSeed(e))}get publicKey(){return new x(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const Ge=p.struct([p.u8("numSignatures"),p.u8("padding"),p.u16("signatureOffset"),p.u16("signatureInstructionIndex"),p.u16("publicKeyOffset"),p.u16("publicKeyInstructionIndex"),p.u16("messageDataOffset"),p.u16("messageDataSize"),p.u16("messageInstructionIndex")]);class Xe{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:s}=e;Z(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),Z(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const i=Ge.span,a=i+t.length,u=a+n.length,c=o.lW.alloc(u+r.length);return Ge.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:s,publicKeyOffset:i,publicKeyInstructionIndex:s,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:s},c),c.fill(t,i),c.fill(n,a),c.fill(r,u),new K({keys:[],programId:Xe.programId,data:c})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Z(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=je.fromSecretKey(t),s=e.publicKey.toBytes(),o=i().sign.detached(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,instructionIndex:n})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}(0,n.Z)(Xe,"programId",new x("Ed25519SigVerify111111111111111111111111111"));const Ue=new x("StakeConfig11111111111111111111111111111111");class Me{constructor(e,t,r){(0,n.Z)(this,"unixTimestamp",void 0),(0,n.Z)(this,"epoch",void 0),(0,n.Z)(this,"custodian",void 0),this.unixTimestamp=e,this.epoch=t,this.custodian=r}}(0,n.Z)(Me,"default",new Me(0,0,x.default));const qe=Object.freeze({Initialize:{index:0,layout:p.struct([p.u32("instruction"),((e="authorized")=>p.struct([W("staker"),W("withdrawer")],e))(),((e="lockup")=>p.struct([p.ns64("unixTimestamp"),p.ns64("epoch"),W("custodian")],e))()])},Authorize:{index:1,layout:p.struct([p.u32("instruction"),W("newAuthorized"),p.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:p.struct([p.u32("instruction")])},Split:{index:3,layout:p.struct([p.u32("instruction"),p.ns64("lamports")])},Withdraw:{index:4,layout:p.struct([p.u32("instruction"),p.ns64("lamports")])},Deactivate:{index:5,layout:p.struct([p.u32("instruction")])},Merge:{index:7,layout:p.struct([p.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:p.struct([p.u32("instruction"),W("newAuthorized"),p.u32("stakeAuthorizationType"),v("authoritySeed"),W("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ce{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,s=n||Me.default,i=C(qe.Initialize,{authorized:{staker:m(r.staker.toBuffer()),withdrawer:m(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:m(s.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:X,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new K(o)}static createAccountWithSeed(e){const t=new O;t.add($.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:s}))}static createAccount(e){const t=new O;t.add($.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:s}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,s=C(qe.Delegate);return(new O).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:U,isSigner:!1,isWritable:!1},{pubkey:Ue,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:s,custodianPubkey:i}=e,o=C(qe.Authorize,{newAuthorized:m(n.toBuffer()),stakeAuthorizationType:s.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&a.push({pubkey:i,isSigner:!1,isWritable:!1}),(new O).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:s,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:a}=e,u=C(qe.AuthorizeWithSeed,{newAuthorized:m(i.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:m(s.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new O).add({keys:c,programId:this.programId,data:u})}static split(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:s}=e,i=new O;i.add($.createAccount({fromPubkey:r,newAccountPubkey:n,lamports:0,space:this.space,programId:this.programId}));const o=C(qe.Split,{lamports:s});return i.add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,s=C(qe.Merge);return(new O).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:U,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:s,custodianPubkey:i}=e,o=C(qe.Withdraw,{lamports:s}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:U,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&a.push({pubkey:i,isSigner:!1,isWritable:!1}),(new O).add({keys:a,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=C(qe.Deactivate);return(new O).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}(0,n.Z)(Ce,"programId",new x("Stake11111111111111111111111111111111111111")),(0,n.Z)(Ce,"space",200);const{publicKeyCreate:De,ecdsaSign:Ne}=b(),Le=p.struct([p.u8("numSignatures"),p.u16("signatureOffset"),p.u8("signatureInstructionIndex"),p.u16("ethAddressOffset"),p.u8("ethAddressInstructionIndex"),p.u16("messageDataOffset"),p.u16("messageDataSize"),p.u8("messageInstructionIndex"),p.blob(20,"ethAddress"),p.blob(64,"signature"),p.u8("recoveryId")]);class Fe{constructor(){}static publicKeyToEthAddress(e){Z(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return o.lW.from(f.keccak_256.update(m(e)).digest()).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:s,instructionIndex:i}=e;return Fe.createInstructionWithEthAddress({ethAddress:Fe.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:s,instructionIndex:i})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:s,instructionIndex:i=0}=e;let a;a="string"===typeof t?t.startsWith("0x")?o.lW.from(t.substr(2),"hex"):o.lW.from(t,"hex"):t,Z(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const u=12+a.length,c=u+n.length+1,d=o.lW.alloc(Le.span+r.length);return Le.encode({numSignatures:1,signatureOffset:u,signatureInstructionIndex:i,ethAddressOffset:12,ethAddressInstructionIndex:i,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:i,signature:m(n),ethAddress:m(a),recoveryId:s},d),d.fill(m(r),Le.span),new K({keys:[],programId:Fe.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;Z(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=m(t),s=De(e,!1).slice(1),i=o.lW.from(f.keccak_256.update(m(r)).digest()),{signature:a,recid:u}=Ne(i,e);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:u,instructionIndex:n})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}(0,n.Z)(Fe,"programId",new x("KeccakSecp256k11111111111111111111111111111"));new x("Va1idator1nfo111111111111111111111111111111"),(0,y.dt)({name:(0,y.Z_)(),website:(0,y.jt)((0,y.Z_)()),details:(0,y.jt)((0,y.Z_)()),keybaseUsername:(0,y.jt)((0,y.Z_)())});new x("Vote111111111111111111111111111111111111111"),p.struct([W("nodePubkey"),W("authorizedVoterPubkey"),W("authorizedWithdrawerPubkey"),p.u8("commission"),p.nu64(),p.seq(p.struct([p.nu64("slot"),p.u32("confirmationCount")]),p.offset(p.u32(),-8),"votes"),p.u8("rootSlotValid"),p.nu64("rootSlot"),p.nu64("epoch"),p.nu64("credits"),p.nu64("lastEpochCredits"),p.nu64(),p.seq(p.struct([p.nu64("epoch"),p.nu64("credits"),p.nu64("prevCredits")]),p.offset(p.u32(),-8),"epochCredits")])}}]);